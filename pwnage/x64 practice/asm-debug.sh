#!/bin/bash
if [ $# -eq 0 ]
  then
    echo "No arguments supplied"
    exit 1
fi

# removes extension from file (e.g. filename.asm becomes filename)
fn="$(cut -d'.' -f1 <<<$1)"

nasm -felf64 $fn.asm -o /tmp/$fn.o && ld /tmp/$fn.o -o /tmp/$fn && gdb /tmp/$fn -ex "break _start" -ex "run"
