global _start

section .text

extern gets

_start:
    jmp main

main:
    call gets
    mov al, 1
    mov dil, 1
    mov rsi, hello_world
    mov rdx, length
    syscall


    xor eax, eax ; rax <- 0 (write syscall number)
    xor edi, edi ; rdi <- 0 (stdin file descriptor)
    mov rsi, buffer ; rsi <- address of the buffer
    mov edx, BUFSIZE ; rdx <- size of the buffer
    syscall ; execute

    mov al, 1
    mov dil, 1
    mov rsi, buffer
    mov rdx, BUFSIZE
    syscall

    mov al, 1
    push 0xa
    mov rsi, rsp
    mov dl, 0x2
    syscall

    mov al, 60
    syscall

section .data
    hello_world: db "Hello fucker!"
    length: equ $-hello_world

section .bss
    buffer: resb 7
    BUFSIZE: equ $-buffer
